syntax = "proto3";
option java_package = "com.bootapp.core.grpc";
import "core_common.proto";
package core;

// add credential to prevent evil usage
service DalUserService {
    rpc CheckPhoneExists(UserPhoneReq) returns (Empty);
    //--------------------------------------------------- user
    //--- create a user
    rpc WriteUser(User) returns (UserWithOrg);
    //--- query a single user
    rpc ReadUser(User) returns (UserWithOrg);
    //--- query users with params
    rpc ReadUsers(ReadUsersReq) returns (ReadUsersResp);
}

message ReadUsersReq {
    User user = 1;
    int64 offset_id = 2;
    int32 limit = 3;
}
message ReadUsersResp {
    repeated User users = 1;
}

message UserPhoneReq {
    string phone = 1;
}